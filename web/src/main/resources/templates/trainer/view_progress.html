<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:th="http://www.thymeleaf.org">
<head>
<style>
.highcharts-figure, .highcharts-data-table table {
	min-width: 320px;
	max-width: 800px;
	margin: 1em auto;
}

.highcharts-data-table table {
	font-family: Verdana, sans-serif;
	border-collapse: collapse;
	border: 1px solid #EBEBEB;
	margin: 10px auto;
	text-align: center;
	width: 100%;
	max-width: 500px;
}

.highcharts-data-table caption {
	padding: 1em 0;
	font-size: 1.2em;
	color: #555;
}

.highcharts-data-table th {
	font-weight: 600;
	padding: 0.5em;
}

.highcharts-data-table td, .highcharts-data-table th,
	.highcharts-data-table caption {
	padding: 0.5em;
}

.highcharts-data-table thead tr, .highcharts-data-table tr:nth-child(even)
	{
	background: #f8f8f8;
}

.highcharts-data-table tr:hover {
	background: #f1f7ff;
}

input[type="number"] {
	min-width: 50px;
}
</style>
<title>Admin</title>
<link
	href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css"
	rel="stylesheet" id="bootstrap-css">
<script
	src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js"></script>
<script src="https://code.jquery.com/jquery-1.11.1.min.js"></script>
</head>
<body>
	<h3
		style="text-align: center; font-size: 40px; margin-top: 30px; margin-bottom: 30px;">
		Progres pentru <span th:text="${learner.username}"></span>
	</h3>
				<div class="container-fluid">
		<div class="row">
			<div class="col-md-10 mx-auto">
				<div class="row">
					<div class="col-md-7">
						<figure class="highcharts-figure">
							<div id="container"></div>
						</figure>
					</div>
					<div class="col-md-5">
						<div class="row">
							<div class="col-md-5">
								<h3>Informatii</h3>
								<p th:text="${learner.gender}"></p>
								<p>
									Exercitii Efectuate:
									<button type="button" class="btn btn-primary"
										data-toggle="modal" th:text="${numberOfExercisesDone}"
										data-target="#exampleModal"></button>
								<div class="modal fade" id="exampleModal" tabindex="-1"
									role="dialog" aria-labelledby="exampleModalLabel"
									aria-hidden="true">
									<div class="modal-dialog" role="document">
										<div class="modal-content">
											<div class="modal-header">
												<h5 class="modal-title" id="exampleModalLabel">Exercitiile
													Efectuate</h5>
												<button type="button" class="close" data-dismiss="modal"
													aria-label="Close">
													<span aria-hidden="true">&times;</span>
												</button>
											</div>
											<div class="modal-body">
												<ul
													th:each="exercise, iterStat : ${exercisesDoneForLearner}">
													<li th:text="${exercise.exercise.name}"></li>
													<li th:text="${exercise.exercise.caloriesBurned}"></li>
													<li th:text="${exercise.exercise.numberOfSeries}"></li>
													<li th:text="${exercise.exercise.numberOfReps}"></li>
													<li th:text="${exercise.exercise.execution}"></li>
													<li th:text="${exercise.exercise.trainedMuscleGroup}"></li>
												</ul>
											</div>
											<div class="modal-footer">
												<button type="button" class="btn btn-secondary"
													data-dismiss="modal">Close</button>
												<button type="button" class="btn btn-primary">Save
													changes</button>
											</div>
										</div>
									</div>
								</div>
								</p>
								<p>
									Exercitii Neefectuate:
									<button type="button" class="btn btn-primary"
										data-toggle="modal" th:text="${numberOfExercisesUnDone}"
										data-target="#exampleModal2"></button>
								<div class="modal fade" id="exampleModal2" tabindex="-1"
									role="dialog" aria-labelledby="exampleModal2Label"
									aria-hidden="true">
									<div class="modal-dialog" role="document">
										<div class="modal-content">
											<div class="modal-header">
												<h5 class="modal-title" id="exampleModal2Label">Exercitiile
													Neefectuate</h5>
												<button type="button" class="close" data-dismiss="modal"
													aria-label="Close">
													<span aria-hidden="true">&times;</span>
												</button>
											</div>
											<div class="modal-body">
												<ul
													th:each="exercise, iterStat : ${totalExercises}">
													<li th:text="${exercise.name}"></li>
													<li th:text="${exercise.caloriesBurned}"></li>
													<li th:text="${exercise.numberOfSeries}"></li>
													<li th:text="${exercise.numberOfReps}"></li>
													<li th:text="${exercise.execution}"></li>
													<li th:text="${exercise.trainedMuscleGroup}"></li>
												</ul>
											</div>
											<div class="modal-footer">
												<button type="button" class="btn btn-secondary"
													data-dismiss="modal">Close</button>
												<button type="button" class="btn btn-primary">Save
													changes</button>
											</div>
										</div>
									</div>
								</div>
								</p>
								<p th:text="${height + ' CM'}"></p>
								<p th:text="${weight + ' KG'}"></p>
							</div>
							<div class="col-md-7">
								<div
									th:if="${weight > 50 and weight < 60 and learner.gender.getGender() == 'Barbat'}">
									<img th:src="@{${'/images/male-ectomorph.png'}}"
										alt="Cinque Terre" width="50" height="213">
								</div>
								<div
									th:if="${weight > 60 and weight < 70 and learner.gender.getGender() == 'Barbat'}">
									<img th:src="@{${'/images/male-mesomorph.png'}}"
										alt="Cinque Terre" width="50" height="213">
								</div>
								<div
									th:if="${weight > 80 and learner.gender.getGender() == 'Barbat'}">
									<img th:src="@{${'/images/male-endomorph.png'}}"
										alt="Cinque Terre" width="50" height="213">
								</div>

								<div
									th:if="${weight > 40 and weight < 50 and learner.gender.getGender() == 'Femeie'}">
									<img th:src="@{${'/images/female-ectomorph.png'}}"
										alt="Cinque Terre" width="50" height="213">
								</div>
								<div
									th:if="${weight > 50 and weight < 60 and learner.gender.getGender() == 'Femeie'}">
									<img th:src="@{${'/images/female-mesomorph.png'}}"
										alt="Cinque Terre" width="50" height="213">
								</div>
								<div
									th:if="${weight > 60 and learner.gender.getGender() == 'Femeie'}">
									<img th:src="@{${'/images/female-endomorph.png'}}"
										alt="Cinque Terre" width="50" height="213">
								</div>
							</div>
						</div>
					</div>
				</div>
				<div class="row">
					<div class="col-md-12">
						<div id="chartBurnedCalories" style="height: 300px;"></div>
					</div>
				</div>
				<div class="row">
					<div class="col-md-12">
						<div id="chartExercisesDone" style="height: 300px;"></div>
					</div>
				</div>
				<div>
					<div th:if="${noFeedbackWasProvided}">
						<form th:action="@{/helper_offers_feedback}" method="post">
							<input type="hidden" name="learnerId"
								th:value="${learner.accountId}" />
							<button type="submit">Ofera Feedback</button>
						</form>
					</div>
				</div>
			</div>
		</div>
	</div>
	<script src="https://code.jquery.com/jquery-3.4.1.min.js"
		integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo="
		crossorigin="anonymous"></script>
	<script
		src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js"></script>
	<script src="https://code.highcharts.com/highcharts.js"></script>
	<script src="https://code.highcharts.com/modules/exporting.js"></script>
	<script src="https://code.highcharts.com/modules/export-data.js"></script>
	<script src="https://code.highcharts.com/modules/accessibility.js"></script>
	<script th:inline="javascript">
		Highcharts.chart('container', {
			chart : {
				type : 'pie',
				options3d : {
					enabled : true,
					alpha : 50,
					beta : 0
				}
			},
			title : {
				text : 'Exercitii Efectuate VS Exercitii Neefectuate'
			},
			tooltip : {
				pointFormat : '{series.name}: <b>{point.percentage:.1f}%</b>'
			},
			plotOptions : {
				pie : {
					allowPointSelect : true,
					cursor : 'pointer',
					depth : 35,
					dataLabels : {
						enabled : true,
						format : '{point.name}'
					}
				}
			},
			series : [ {
				type : 'pie',
				name : 'Procent Exercitii',
				data : [ [ 'Neefectuat', [[${numberOfExercisesUnDone}]] ], [ 'Efectuat', [[${numberOfExercisesDone}]] ]  ]
			} ]
		});
		
		$('#chartBurnedCalories').highcharts({
	        chart: {
	            type: 'column'
	        },
	        title: {
	        	text: 'Suma Caloriilor Arse'
	        },
	        scrollbar: {
	            enabled: true
	        },
	        xAxis: {
	            categories: [[${chartBurnedCalories.keySet()}]],
	            crosshair: true,
	            min: 0,
	            max: 10,
	        },
	        yAxis: {
	        },
	        tooltip: {
	            headerFormat: '<span style="font-size:10px">{point.key}</span><table>',
	            pointFormat: '<tr><td style="color:{series.color};padding:0">{series.name}: </td>' +
	            '<td style="padding:0"><b>{point.y:.1f} Kcal</b></td></tr>',
	            footerFormat: '</table>',
	            shared: true,
	            useHTML: true
	        },
	        plotOptions: {
	            column: {
	                pointPadding: 0.2,
	                borderWidth: 0,
	                cropThreshold: 1000
	            }
	        },
	        series: [{
	            name: 'Valoare',
	            data: [[${chartBurnedCalories.values()}]]

	        }]
	    });
		
		$('#chartExercisesDone').highcharts({
	        chart: {
	            type: 'column'
	        },
	        title: {
	            text: 'Numar Exercitii Efectuate'
	        },
	        scrollbar: {
	            enabled: true
	        },
	        xAxis: {
	            categories: [[${chartExercisesDone.keySet()}]],
	            crosshair: true,
	            min: 0,
	            max: 10,
	        },
	        yAxis: {
	        },
	        tooltip: {
	            headerFormat: '<span style="font-size:10px">{point.key}</span><table>',
	            pointFormat: '<tr><td style="color:{series.color};padding:0">{series.name}: </td>' +
	            '<td style="padding:0"><b>{point.y:.0f}</b></td></tr>',
	            footerFormat: '</table>',
	            shared: true,
	            useHTML: true
	        },
	        plotOptions: {
	            column: {
	                pointPadding: 0.2,
	                borderWidth: 0,
	                cropThreshold: 1000
	            }
	        },
	        series: [{
	            name: 'Valoare',
	            data: [[${chartExercisesDone.values()}]]

	        }]
	    });
		
	</script>
</body>
</html>