<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:th="http://www.thymeleaf.org">
<head>
<title>Transaction History</title>
<link th:href="@{css/font-face.css}" rel="stylesheet" media="all">
<link th:href="@{vendor/font-awesome-4.7/css/font-awesome.min.css}"
	rel="stylesheet" media="all">
<link th:href="@{vendor/font-awesome-5/css/fontawesome-all.min.css}"
	rel="stylesheet" media="all">
<link
	th:href="@{vendor/mdi-font/css/material-design-iconic-font.min.css}"
	rel="stylesheet" media="all">

<link th:href="@{vendor/bootstrap-4.1/bootstrap.min.css}"
	rel="stylesheet" media="all">

<link th:href="@{vendor/animsition/animsition.min.css}" rel="stylesheet"
	media="all">
<link
	th:href="@{vendor/bootstrap-progressbar/bootstrap-progressbar-3.3.4.min.css}"
	rel="stylesheet" media="all">
<link th:href="@{vendor/wow/animate.css}" rel="stylesheet" media="all">
<link th:href="@{vendor/css-hamburgers/hamburgers.min.css}"
	rel="stylesheet" media="all">
<link th:href="@{vendor/slick/slick.css}" rel="stylesheet" media="all">
<link th:href="@{vendor/select2/select2.min.css}" rel="stylesheet"
	media="all">
<link th:href="@{vendor/perfect-scrollbar/perfect-scrollbar.css}"
	rel="stylesheet" media="all">
<script src="https://kit.fontawesome.com/8f58d13ed0.js"
	crossorigin="anonymous"></script>
<link th:href="@{css/theme.css}" rel="stylesheet" media="all">
<link th:href="@{css/style.css}" rel="stylesheet" media="all">
</head>
<body>
	<div th:each="role: ${account.roles}">
		<div class="page-wrapper">
			<header class="header-mobile d-block d-lg-none">
				<div class="header-mobile__bar">
					<div class="container-fluid">
						<div class="header-mobile-inner">
							<a class="logo" href="index.html"> <img
								src="images/Screenshot_18.png">
							</a>
							<button class="hamburger hamburger--slider" type="button">
								<span class="hamburger-box"> <span
									class="hamburger-inner"></span>
								</span>
							</button>
						</div>
					</div>
				</div>
				<nav class="navbar-mobile">
					<div class="container-fluid">
						<ul class="navbar-mobile__list list-unstyled">
							<div th:if="${role.name eq 'ROLE_USER'}">
								<li><a th:href="@{/home}" class="links"> <i
										class="fas fa-home icon-link"></i> <span>Home</span>
								</a></li>
								<li><a th:href="@{/view_profile}" class="links"><i
										class="far fa-id-card icon-link"></i><span>Profil</span></a></li>
								<li><a th:href="@{/shopping_cart}" class="links"><i
										class="fas fa-shopping-cart icon-link"></i><span>Cos
											Cumparaturi</span></a></li>
								<li><a th:href="@{/choose_device}" class="links"><i
										class="fas fa-laptop-medical icon-link"></i><span>Alege
											Dispozitiv</span></a></li>
								<li><a th:href="@{/choose_helper}" class="links"><i
										class="fas fa-user-friends icon-link"></i><span>Alege
											Experti</span></a></li>
								<li><a th:href="@{/view_helpers}" class="links"><i
										class="fas fa-clipboard-list icon-link"
										style="font-size: 30px; width: 30px;"></i><span>Alege
											Planuri</span></a></li>
								<li><a th:href="@{/choose_helper}" class="links"><i
										class="fas fa-laptop-medical icon-link"></i><span>Dispozitive</span></a></li>
								<li><a th:href="@{/view_training_plans}" class="links"><i
										class="fas fa-dumbbell icon-link"></i><span>Planuri
											Antrenamente</span></a></li>
								<li><a th:href="@{/view_diet_plans}" class="links"><i
										class="fas fa-utensils icon-link" style="width: 27px;"></i><span>Planuri
											Diete</span></a></li>
								<li><a th:href="@{/view_feedbacks_from_helper}"
									class="links"><i class="fas fa-comment-dots icon-link"></i><span>Feedback-uri</span></a></li>
								<li><a th:href="@{/transaction_history}" class="links"><i
										class="fas fa-money-check icon-link"></i><span>Istoric
											Tranzactii</span></a></li>
							</div>
							<div th:if="${role.name eq 'ROLE_TRAINER'}"></div>
							<div th:if="${role.name eq 'ROLE_NUTRITIONIST'}"></div>
						</ul>
					</div>
				</nav>
			</header>
			<aside class="menu-sidebar d-none d-lg-block">
				<a class="logo" href="index.html"> <img
					src="images/Screenshot_18.png">
				</a>
				<div class="menu-sidebar__content js-scrollbar1">
					<nav class="navbar-sidebar">
						<ul class="list-unstyled navbar__list">
							<div th:if="${role.name eq 'ROLE_USER'}">
								<li><a th:href="@{/home}" class="links"> <i
										class="fas fa-home icon-link"></i> <span>Home</span>
								</a></li>
								<li><a th:href="@{/view_profile}" class="links"><i
										class="far fa-id-card icon-link"></i><span>Profil</span></a></li>
								<li><a th:href="@{/shopping_cart}" class="links"><i
										class="fas fa-shopping-cart icon-link"></i><span>Cos
											Cumparaturi</span></a></li>
								<li><a th:href="@{/choose_device}" class="links"><i
										class="fas fa-laptop-medical icon-link"></i><span>Alege
											Dispozitiv</span></a></li>
								<li><a th:href="@{/choose_helper}" class="links"><i
										class="fas fa-user-friends icon-link"></i><span>Alege
											Experti</span></a></li>
								<li><a th:href="@{/view_helpers}" class="links"><i
										class="fas fa-clipboard-list icon-link"
										style="font-size: 30px; width: 30px;"></i><span>Alege
											Planuri</span></a></li>
								<li><a th:href="@{/choose_helper}" class="links"><i
										class="fas fa-laptop-medical icon-link"></i><span>Dispozitive</span></a></li>
								<li><a th:href="@{/view_training_plans}" class="links"><i
										class="fas fa-dumbbell icon-link"></i><span>Planuri
											Antrenamente</span></a></li>
								<li><a th:href="@{/view_diet_plans}" class="links"><i
										class="fas fa-utensils icon-link" style="width: 27px;"></i><span>Planuri
											Diete</span></a></li>
								<li><a th:href="@{/view_feedbacks_from_helper}"
									class="links"><i class="fas fa-comment-dots icon-link"></i><span>Feedback-uri</span></a></li>
								<li><a th:href="@{/transaction_history}" class="links"><i
										class="fas fa-money-check icon-link"></i><span>Istoric
											Tranzactii</span></a></li>
							</div>
							<div th:if="${role.name eq 'ROLE_TRAINER'}"></div>
							<div th:if="${role.name eq 'ROLE_NUTRITIONIST'}"></div>
						</ul>
					</nav>
				</div>
			</aside>
			<div class="page-container">
				<div class="main-content">
					<div class="section__content section__content--p30">
						<div th:if="${role.name eq 'ROLE_USER'}">
							<div th:if="${#lists.size(products)}">
								<h3
									style="text-align: center; font-size: 40px; margin-top: 30px; margin-bottom: 30px; color: white;">Istoric
									Tranzactii</h3>
								<div class="container-fluid">
									<div class="row">
										<div class="col-md-12">
											<div class="row" style="margin-bottom: 40px;">
												<div class="col-lg-6">
													<div class="au-card m-b-30" style="min-height: 100%;">
														<div class="au-card-inner">
															<canvas id="singelBarChart" style="height: 110px;"></canvas>
														</div>
													</div>
												</div>
												<div class="col-lg-6">
													<div class="au-card m-b-30" style="min-height: 100%;">
														<div class="au-card-inner">
															<canvas id="container"></canvas>
														</div>
													</div>
												</div>
											</div>
											<div class="row">
												<div class="col-md-12">
													<h3
														style="text-align: center; font-size: 40px; margin-top: 30px; margin-bottom: 30px; color: white;">Produse
														Cumparate</h3>

													<div class="slider">
														<a th:each="product, iter: ${products}"
															th:href="${'#slide-'+ product.productId}"
															th:text="${iter.index + 1}"></a>
														<div class="slides">
															<div th:each="product: ${products}">
																<div th:id="${'slide-'+ product.productId}">
																	<div class="wrapper-slider">
																		<div class="product-img">
																			<img
																				style="display: block; position: absolute; top: 50%; left: 50%; min-height: 100%; min-width: 100%; transform: translate(-50%, -50%);"
																				th:src="@{'images/'+${product.imageName}}">
																		</div>
																		<div class="product-info">
																			<div class="product-text">
																				<h1 th:text="${product.productName}"></h1>
																				<h2 th:text="${product.dateOfPurchased}"></h2>
																				<p th:text="${product.description}"></p>
																			</div>
																			<div
																				style="position: relative; left: 22px; top: 35px;">
																				<h1 th:text="${product.price + ' LEI'}"></h1>
																			</div>
																		</div>
																	</div>
																</div>
															</div>
														</div>
													</div>
												</div>
											</div>
										</div>
									</div>
								</div>
							</div>
							<div th:unless="${#lists.size(products)}">
								<h3
									style="text-align: center; font-size: 40px; margin-top: 30px; margin-bottom: 30px; color: white;">Istoric
									Tranzactii</h3>
								<div th:if="${availableBalance > 0 and payments > 0}">
									<div class="container-fluid">
										<div class="row">
											<div class="col-md-6 mx-auto">
												<div class="au-card m-b-30" style="min-height: 100%;">
													<div class="au-card-inner">
														<canvas id="container"></canvas>
													</div>
												</div>
											</div>
										</div>
									</div>
								</div>
								<div th:unless="${availableBalance > 0 and payments > 0}">
									<div style="text-align: center;">
										<span
											style="font-size: 300px; font-weight: 900; color: white;">0</span>
										<br style=""> <span
											style="font-size: 100px; color: white; position: relative; top: -100px;">produse
											cumparate</span>
									</div>
								</div>
							</div>
						</div>
						<div
							th:if="${role.name eq 'ROLE_TRAINER' or role.name eq 'ROLE_NUTRITIONIST'}">
							<div th:if="${#lists.size(products)}">
								<h3
									style="text-align: center; font-size: 40px; margin-top: 30px; margin-bottom: 30px; color: white;">Istoric
									Tranzactii</h3>
								<div class="container-fluid">
									<div class="row">
										<div class="col-md-12">
											<div class="row" style="margin-bottom: 40px;">
												<div class="col-lg-6">
													<div class="au-card m-b-30" style="min-height: 100%;">
														<div class="au-card-inner">
															<canvas id="singelBarChart" style="height: 110px;"></canvas>
														</div>
													</div>
												</div>
												<div class="col-lg-6">
													<div class="au-card m-b-30" style="min-height: 100%;">
														<div class="au-card-inner">
															<canvas id="container"></canvas>
														</div>
													</div>
												</div>
											</div>
											<div class="row">
												<div class="col-md-12">
													<h3
														style="text-align: center; font-size: 40px; margin-top: 30px; margin-bottom: 30px; color: white;">Produse
														Vandute</h3>
													<div class="row">
														<div class="col-md-11 mx-auto">
															<div class="table100 ver6 m-b-110">
																<table data-vertable="ver6">
																	<thead style="text-align: center;">
																		<tr class="row100 head"
																			style="border-bottom: 5px solid #7300e6;">
																			<th style="border-right: 5px solid #7300e6;"
																				class="column100">Nume</th>
																			<th style="border-right: 5px solid #7300e6;"
																				class="column100">Pret</th>
																			<th style="border-right: 5px solid #7300e6;"
																				class="column100">Tip</th>
																			<th class="column100">Date Vanzare</th>
																		</tr>
																	</thead>
																	<tbody style="text-align: center;">
																		<tr class="row100" th:each="product: ${products}">
																			<td style="border-right: 5px solid #7300e6;"
																				class="column100" th:text="${product.productName}"></td>
																			<td style="border-right: 5px solid #7300e6;"
																				class="column100"
																				th:text="${product.price + ' LEI'}"></td>
																			<td style="border-right: 5px solid #7300e6;"
																				class="column100" th:text="${product.type}"></td>
																			<td class="column100"
																				th:text="${product.dateOfPurchased}"></td>
																		</tr>
																	</tbody>
																</table>
															</div>
														</div>
													</div>
												</div>
											</div>
										</div>
									</div>
								</div>
							</div>
							<div th:unless="${#lists.size(products)}">
								<h3
									style="text-align: center; font-size: 40px; margin-top: 30px; margin-bottom: 30px; color: white;">Istoric
									Tranzactii</h3>
								<div style="text-align: center;">
									<span style="font-size: 300px; font-weight: 900; color: white;">0</span>
									<br style=""> <span
										style="font-size: 100px; color: white; position: relative; top: -100px;">produse
										vandute</span>
								</div>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>
	<script th:src="@{/vendor/jquery-3.2.1.min.js}"></script>
	<script th:src="@{/vendor/bootstrap-4.1/popper.min.js}"></script>
	<script th:src="@{/vendor/bootstrap-4.1/bootstrap.min.js}"></script>
	<script th:src="@{/vendor/slick/slick.min.js}">
    </script>
	<script th:src="@{/vendor/wow/wow.min.js}"></script>
	<script th:src="@{/vendor/animsition/animsition.min.js}"></script>
	<script
		th:src="@{/vendor/bootstrap-progressbar/bootstrap-progressbar.min.js}">
    </script>
	<script th:src="@{/vendor/counter-up/jquery.waypoints.min.js}"></script>
	<script th:src="@{/vendor/counter-up/jquery.counterup.min.js}">
    </script>
	<script th:src="@{/vendor/circle-progress/circle-progress.min.js}"></script>
	<script th:src="@{/vendor/perfect-scrollbar/perfect-scrollbar.js}"></script>
	<script th:src="@{/vendor/chartjs/Chart.bundle.min.js}"></script>
	<script th:src="@{/vendor/select2/select2.min.js}">
    </script>

	<script th:src="@{/js/main.js}"></script>
	<script type="text/javascript" th:src="@{/js/validationcv.js}"></script>
	<script src="https://code.highcharts.com/highcharts.js"></script>
	<script src="https://code.highcharts.com/modules/exporting.js"></script>
	<script src="https://code.highcharts.com/modules/export-data.js"></script>
	<script src="https://code.highcharts.com/modules/accessibility.js"></script>
	<script th:inline="javascript">
		
	let availableBalance = [[${availableBalance}]];
	let payments = [[${payments}]];
	console.log(availableBalance + ' ' + payments);
	var ctx = document.getElementById("container");
    if (ctx) {
      ctx.height = 200;
      var myChart = new Chart(ctx, {
        type: 'pie',
        data: {
          datasets: [{
            data: [availableBalance, payments],
            backgroundColor: [
                '#7300e6',
                'black'
            ]

          }],
          labels: [
            "Sold Disponibil",
            "Cheltuieli"
          ]
        },
        options: {
          legend: {
            position: 'top',
            labels: {
            	fontSize: 13,
	            fontStyle: 'bold',
	            fontColor: 'black'
            }

          },
          responsive: true
        }
      });
    }
	
		 let products = [[${products}]];
		 let priceOfProducts = new Array();
		 let nameOfProducts = new Array();
		 for(const product of products) {
			 nameOfProducts.push(product.productName);
			 priceOfProducts.push(product.price);
		 }
		 var ctx = document.getElementById("singelBarChart");
		    if (ctx) {
		      ctx.height = 150;
		      var myChart = new Chart(ctx, {
		        type: 'horizontalBar',
		        data: {
		          labels: nameOfProducts,
		          datasets: [
		            {
		              label: "Pret",
		              data: priceOfProducts,
		              borderWidth: "0",
		              backgroundColor: "#7300e6"
		            }
		          ]
		        },
		        options: {
		          legend: {
		            position: 'top',
		            labels: {
		            	fontSize: 13,
			            fontStyle: 'bold',
			            fontColor: 'black'
		            }

		          },
		          scales: {
		            xAxes: [{
		              ticks: {
		                fontSize: 13,
			            fontStyle: 'bold',
			            fontColor: 'black'

		              },
		              gridLines: {
		                  display:false,
		                  
		              }
		            }],
		            yAxes: [{
		              ticks: {
		                beginAtZero: true,
		                fontSize: 14,
			            fontStyle: 'bold',
			            fontColor: 'black'
		              },
		              gridLines: {
		                  display:false
		              }
		            }]
		          }
		        }
		      });
		    }
		</script>
</body>
</html>